<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>Rails Active Records - Models</title>
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<meta name="Keywords" content="Learning, Ruby, rails, strengths, framework, installation, examples, RubyGems, resources, Guide, actionpack, actionview, basics, directory, structure, advance, activerecord, libraries, Model, View, Controller, Embeded Ruby, Erb, Rolling, Metaprogramming,Built-in, testing, David, Black, Hansson, Heinemeier, RAA, Scaffolding" />
<meta name="Description" content="Rails Active Records - Models, Learn Ruby on Rails in simple and easy steps. You will learn its installation, framework, strengths with examples and you will learn about actionpack, actionview, activerecord, Heinemeier, Scaffolding, Controller, Heinemeier, Hansson, Rakefile etc." />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="no-cache" />
<base href="http://www.tutorialspoint.com" />
<link rel="stylesheet" type="text/css" href="tp.css" />
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-232293-6";
urchinTracker();
</script>
</head>
<body>
<center>
<table border="0" class="main" cellpadding="2" cellspacing="0">
<tr>
<td class="content" valign="top" align="left">
<a href="index.htm"><img src="images/tp-logo.gif" border="0"  alt="Tutorials Point" /></a>
<br />
<br />
<div  class="left">
<!-- SiteSearch Google -->
<form method="get" action="http://www.google.com/custom" target="google_window">
<table border="0">
<tr><td nowrap="nowrap" valign="top" align="center" height="32">
<a href="http://www.google.com/">
<img src="http://www.google.com/logos/Logo_25wht.gif" border="0" alt="Google" align="middle"></img></a>
</td>
</tr>
<tr>
<td nowrap="nowrap">
<input type="hidden" name="domains" value="www.tutorialspoint.com"></input>
<input type="text" name="q" size="20" maxlength="255" value=""></input>
<input type="submit" name="sa" style="width:20px;font-weight:bold" value="..."></input>
</td></tr>
<tr>
<td nowrap="nowrap">
<table>
<tr>
<td>
<input type="radio" name="sitesearch" value="" checked="checked"></input>
<font size="-1" color="#000000">Web</font>
</td>
<td>
<input type="radio" name="sitesearch" value="www.tutorialspoint.com"></input>
<font size="-1" color="#000000">This Site</font>
</td>
</tr>
</table>
<input type="hidden" name="client" value="pub-7133395778201029"></input>
<input type="hidden" name="forid" value="1"></input>
<input type="hidden" name="ie" value="ISO-8859-1"></input>
<input type="hidden" name="oe" value="ISO-8859-1"></input>
<input type="hidden" name="cof" value="GALT:#008000;GL:1;DIV:#336699;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0000FF;LC:0000FF;T:000000;GFNT:0000FF;GIMP:0000FF;FORID:1"></input>
<input type="hidden" name="hl" value="en"></input>
</td></tr></table>
</form>
<!-- SiteSearch Google -->
</div>
<br />
&nbsp;&nbsp;<b>Learning Ruby on Rails</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="/ruby-on-rails/index.htm">Rails Home</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-introduction.htm">Rails Introduction</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-installation.htm">Rails Installation</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-framework.htm">Rails Framework</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-directory-structure.htm">Rails Dir Structure</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-examples.htm">Rails Examples</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-database-setup.htm">Rails Database Setup</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-active-records.htm"><b>Rails Active Records</b></a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-migrations.htm">Rails Migrations</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-controllers.htm">Rails Controllers</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-views.htm">Rails Views</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-layouts.htm">Rails Layouts</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-scaffolding.htm">Rails Scaffolding</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-and-ajax.htm">Rails and AJAX</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-file-uploading.htm">Rails Uploads File</a></li>
<li><a class="left" target="_top" href="/ruby-on-rails/rails-send-email.htm">Rails Sends Email</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Ruby on Rails Quick Guide</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="/ruby-on-rails/rails-quick-guide.htm" >Ruby on Rails Quick Guide</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Ruby Tutorial</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="/ruby" >Ruby Tutorial</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Ruby on Rails Resources</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="/ruby-on-rails/rails-resources.htm" >Ruby on Rails Resources</a></li>
</ul>
</div>
<br />
&nbsp;&nbsp;<b>Selected Reading</b>
<div  class="left">
<ul class="menu">
<li><a class="left" target="_top" href="computer_glossary.htm">Computer Glossary</a></li>
<li><a class="left" target="_top" href="computer_whoiswho.htm">Who is Who</a></li>
</ul>
</div>
<br /><br />
<small>&copy; 2010 TutorialsPoint.COM </small>
</td>
<td valign="top" align="left" width="100%">
<br /><br />
<table cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="index.htm">Home</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="references.htm">References</a>&nbsp;&nbsp;
</td>
<td  style="width:20px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="/forums/index.php">Discussion Forums</a>&nbsp;&nbsp;
</td>
<td  style="width:10px;"></td>
<td  class="top">
&nbsp;&nbsp;<a class="top" href="/about/index.htm">About TP</a>&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="middle"  cellpadding="5" cellspacing="0">
<tr>
<td align="left">
<!-- PRINTING STARTS HERE -->
<h1>Rails Active Records - Models</h1>
<hr />
<a href="/ruby-on-rails/rails-database-setup.htm"><img alt="previous" border="0" src="/images/previous.gif" /></a>
<a href="/ruby-on-rails/rails-migrations.htm"><img alt="next" border="0" src="/images/next.gif" /></a>
<!-- AddThis Bookmark Button BEGIN -->
<a href="http://www.addthis.com/bookmark.php" onclick="addthis_url   = location.href; addthis_title = document.title; return addthis_click(this);" target="_blank"><img src="/images/add-this.gif" border="0" alt="AddThis Social Bookmark Button" /></a> <script type="text/javascript">var addthis_pub = 'tutorialspoint';</script><script type="text/javascript" src="http://s9.addthis.com/js/widget.php?v=10"></script>  
<!-- AddThis Bookmark Button END -->
<br />
<br />
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as";
google_ad_type = "image";
google_ad_channel = "";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<hr />
<p>Rails Active Record is the Object/Relational Mapping (ORM) layer supplied with Rails. It closely follows the standard ORM model, which is as follows:</p>
<ul>
<li><p>tables map to classes,</p></li>
<li><p>rows map to objects and </p></li>
<li><p>columns map to object attributes</p></li>
</ul>
<p>Rails Active Records provides an interface and binding between the tables in a relational database and the Ruby program code that manipulates database records. Ruby method names are automatically generated from the field names of database tables.</p>
<p>Each Active Record object has CRUD (<b><u>C</u></b>reate, <b><u>R</u></b>ead, <b><u>U</u></b>pdate, and <b><u>D</u></b>elete) methods for database access. This strategy allows simple designs and straightforward mappings between database tables and application objects.</p>
<h2>Translating a domain model into SQL:</h2>
<p>Translating a domain model into SQL is generally straightforward, as long as you remember that you have to write Rails-friendly SQL. In practical terms you have to follow certain rules:</p>
<ul>
<li><p>Each entity (such as book) gets a table in the database named after it, but in the plural (books).</p></li>
<li><p>Each such entity-matching table has a field called id, which contains a unique integer for each record inserted into the table.</p></li>
<li><p>Given entity x and entity y, if entity y belongs to entity x, then table y has a field called x_id.</p></li>
<li><p>The bulk of the fields in any table store the values for that entity's simple properties (anything that's a number or a string).</p></li>
</ul>
<h2>Creating Active Record files:</h2>
<p>To create the Active Record files for our entities for library application, introduced in the previous chapter, issue the following command from the top level of the application directory.</p>
<table cellpadding="5" class="src"><tr><td><pre>
C:\ruby\library\&gt; ruby script/generate model Book
C:\ruby\library\&gt; ruby script/generate model Subject
</pre></td></tr></table>
<p>You're telling the generator to create models called Book, and Subject to store instances of books and subjects. Notice that you are capitalizing Book and Subject and using the singular form. This is a Rails paradigm that you should follow each time you create a model.</p>
<p>When you use the generate tool, Rails creates the actual model file that holds all the methods unique to the model and the business rules you define, a unit test file for performing test-driven development, a sample data file (called fixtures) to use with the unit tests, and a Rails migration that makes creating database tables and columns easy.</p>
<p>Apart from creating many other files and directories, this will create files named <b>book.rb</b> and <b>subject.rb</b> containing a skeleton definition in <b>app/models</b> directory.</p>

<p>Content available in book.rb</p>
<table cellpadding="5" class="src"><tr><td><pre>
class Book &lt; ActiveRecord::Base
end
</pre></td></tr></table>
<p>Content available in subject.rb</p>
<table cellpadding="5" class="src"><tr><td><pre>
class Subject &lt; ActiveRecord::Base
end
</pre></td></tr></table>
<h2>Creating associations between models:</h2>
<p>When you have more than one model in your rails  application, you would need to create connection between those models. You can do this via associations. Active Record supports three types of associations:</p>
<ul>
<li><p><b>one-to-one : </b> A one-to-one relationship exists when one item has exactly one of another item. For example, a person has exactly one birthday or a dog has exactly one owner.</p></li>
<li><p><b>one-to-many :</b> A one-to-many relationship exists when a single object can be a member of many other objects. For instance, one subject can have many books.</p></li> 
<li><p><b>many-to-many :</b> A many-to-many relationship exists when the first object is related to one or more of a second object, and the second object is related to one or many of the first object.</p></li>
</ul>
<p>You indicate these associations by adding declarations to your models: has_one, has_many, belongs_to, and has_and_belongs_to_many.</p>
<p>So now you need to tell Rails what relationships you want to establish within the library data system. To do so, modify book.rb and subject.rb to look like this:</p>
<table cellpadding="5" class="src"><tr><td><pre>
class Book &lt; ActiveRecord::Base
  belongs_to :subject
end
</pre></td></tr></table>
<p>Notice above I have used singular subject, because one Book can belong to a single Subject.</p>
<table cellpadding="5" class="src"><tr><td><pre>
class Subject &lt; ActiveRecord::Base
  has_many :books
end
</pre></td></tr></table>
<p>Notice here I have used plural books, because one subject can  have multiple books.</p>
<h2>Implementing validations:</h2>
<p>The implementation of validations is done in a Rails model. The data you are entering into the database is defined in the actual Rails model, so it only makes sense to define what valid data entails in the same location.</p>
<p>Open <b>book.rb</b> and put the following validations:</p>
<table cellpadding="5" class="src"><tr><td><pre>
class Book &lt; ActiveRecord::Base
  belongs_to :subject
  validates_presence_of :title
  validates_numericality_of :price, :message=&gt;"Error Message"
end
</pre></td></tr></table>
<ul>
<li><b>validates_presence_of</b> - protects "NOT NULL" fields against missing user input</li>
<li><b>validates_numericality_of</b> - prevents the user entering non numeric data</li>
</ul>
<p>Besides the validations mentioned above, there are other common validations Check <a href="/ruby-on-rails/rails-quick-guide.htm">Rails Quick Guide</a>.</p>
<h1>What is Next?</h1>
<p>In the next chapter we will learn Rails Migration which allows you to use Ruby to define changes to your database schema, making it possible to use a version control system to keep things synchronized with the actual code.</p>
<hr />
<a href="/ruby-on-rails/rails-database-setup.htm"><img alt="previous" border="0" src="/images/previous.gif" /></a>
<a href="/ruby-on-rails/rails-migrations.htm"><img alt="next" border="0" src="/images/next.gif" /></a>
<a href='/cgi-bin/printversion.cgi?tutorial=ruby-on-rails&amp;file=rails-active-records.htm' target="_blank">
<img src="/images/print.gif" alt="Printer Friendly" border="0" /></a>
<br />
<hr />
<!-- PRINTING ENDS HERE -->
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 336;
google_ad_height = 280;
google_ad_format = "336x280_as";
google_ad_type = "text_image";
google_ad_channel ="9030538898";
google_color_border="ffffff";
google_color_link="900b09";
google_color_url="000000";
google_color_text="000000";
//--></script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></script>
</td></tr>
</table>
</td>
<td class="right" align="center" valign="top">
<br /><br />
<table width="100%" cellpadding="0" cellspacing="0">
<tr valign="middle">
<td  class="top" style="border:0px;">
&nbsp;&nbsp;
</td>
</tr>
</table>
<table class="right"  cellpadding="0" cellspacing="0">
<tr>
<td align="center" class="right">
<p>
<u>Advertisement</u>
</p>
<!-- ADVERTISEMENT OIP STARTS HERE -->
<table class="adv"  cellpadding="0" cellspacing="0" border="0">
<tr>
<td valign="top" nowrap="nowrap"  style="font-size:10pt;">
<center>
<a class="right" href="http://www.photofuntoos.com" target="_blank" title="Online Image Processing">Online Image Processing</a>
</center>
</td>
</tr>
</table>
<br />
<!-- ADVERTISEMENT IBN STARTS HERE -->
<table class="adv"  cellpadding="0" cellspacing="0" border="0">
<tr>
<td valign="top" nowrap="nowrap"  style="font-size:11pt;">
<center>
<a class="right" href="http://www.modernindianbabynames.com/" target="_blank" title="Indian Baby Names">Indian Baby Names</a>
</center>
</td>
</tr>
</table>
<br />
<!-- ADVERTISEMENTS ENDS HERE -->
<script type="text/javascript"><!--
google_ad_client = "pub-7133395778201029";
google_ad_width = 160;
google_ad_height = 600;
google_ad_format = "160x600_as";
google_ad_type = "image";
google_ad_channel ="";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
<br /><br /></td></tr></table>
</td></tr></table>
</center>
</body>
</html>
